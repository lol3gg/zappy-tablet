
<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Zappy Vendita Banco</title>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyC-yyxd1dxn16hx9AUZDKgFpPLWl-YfWnHE",
      authDomain: "zappy-24d29.firebaseapp.com",
      projectId: "zappy-24d29",
      storageBucket: "zappy-24d29.appspot.com",
      messagingSenderId: "356775808247",
      appId: "1:356775808247:web:a5395430ad3dc9aa7c17f2"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
  
    window.addEventListener("DOMContentLoaded", async () => {
    const localeCorrente = "zappydemo"; // intercambiabile per ogni cliente

    const categorieDocRef = doc(db, "locali", localeCorrente, "menu", "categorie");
    const categorieDocSnap = await getDoc(categorieDocRef);

    if (categorieDocSnap.exists()) {
        const data = categorieDocSnap.data();
        let categorie = [];

        for (const key in data) {
            if (Array.isArray(data[key])) {
                categorie = categorie.concat(data[key]);
            }
        }

        const categorieContainer = document.querySelector(".categorie");
        const sezioniProdottiContainer = document.querySelector(".sezioni-prodotti");

        categorie.forEach(async (categoria) => {
            // Crea pulsante dinamico
            const btn = document.createElement("button");
            btn.textContent = (categoria.it || categoria.en || categoria.originale || categoria);
            btn.onclick = () => {
                document.getElementById(categoria).scrollIntoView({ behavior: 'smooth' });
            };
            categorieContainer.appendChild(btn);

            // Crea sezione dinamica
            const sezioneDiv = document.createElement("div");
            sezioneDiv.className = "sezione";
            sezioneDiv.id = categoria;
            sezioneDiv.innerHTML = `<h2>${categoria.it || categoria.en || categoria.originale || categoria}</h2><div class="prodotti" data-categoria="${categoria}"></div>`;
            sezioniProdottiContainer.appendChild(sezioneDiv);

            // Carica prodotti per categoria
            const prodottiRef = collection(db, "locali", localeCorrente, "menu", categoria, "prodotti");
            const snapshot = await getDocs(prodottiRef);
            const container = sezioneDiv.querySelector(".prodotti");

            snapshot.forEach(doc => {
                const data = doc.data();
                const div = document.createElement("div");
div.className = "card";
div.innerHTML = `
    <img src="${data.immagineUrl}" alt="${data.nome.it}" />
    <h4>${data.nome.it}</h4>
    <p>€${data.prezzo.toFixed(2)}</p>
`;
container.appendChild(div);
            });
        });
    } else {
        console.error("Documento categorie non trovato in Firebase.");
    }
});

function toggleModalita(mode) {
  document.querySelectorAll('.modalita-section').forEach(s => s.style.display = 'none');
  document.querySelectorAll('.row.metodi button').forEach(b => b.classList.remove('attivo'));
  document.querySelector('.row.metodi button.' + mode).classList.add('attivo');
  document.getElementById('modalita-' + mode).style.display = 'block';
  if (mode === 'romana') aggiornaAllaRomana();
  if (mode === 'separa') caricaProdottiSepara();
}

function modificaParziale(delta) {
  const input = document.getElementById('input-parziale');
  let val = parseInt(input.value) + delta;
  if (val < 0) val = 0;
  input.value = val;
}

function modificaPersone(delta) {
  const input = document.getElementById('input-persone');
  let val = parseInt(input.value) + delta;
  if (val < 1) val = 1;
  input.value = val;
  aggiornaAllaRomana();
}

function aggiornaAllaRomana() {
  const persone = parseInt(document.getElementById('input-persone').value);
  const totale = carrello.reduce((sum, p) => sum + p.prezzo * p.quantita, 0);
  const diviso = totale / persone;
  document.getElementById('romana-importo').innerText = diviso.toFixed(2).replace('.', ',');
}

function caricaProdottiSepara() {
  const container = document.getElementById('separa-prodotti');
  container.innerHTML = '';
  carrello.forEach((p, i) => {
    const el = document.createElement('div');
    el.textContent = `${p.nome} x${p.quantita} (€${(p.prezzo*p.quantita).toFixed(2)})`;
    el.onclick = () => {
      el.classList.toggle('selected');
      aggiornaSelezioneProdotti();
    };
    container.appendChild(el);
  });
}

function aggiornaSelezioneProdotti() {
  const selected = document.querySelectorAll('#separa-prodotti .selected');
  const box = document.getElementById('selezionati-prodotti');
  let totale = 0;
  box.innerHTML = '';
  selected.forEach(sel => {
    box.appendChild(sel.cloneNode(true));
    const match = sel.textContent.match(/€([0-9]+\.[0-9]+)/);
    if (match) totale += parseFloat(match[1]);
  });
  document.getElementById('separa-totale').innerText = totale.toFixed(2).replace('.', ',');
}

document.addEventListener('DOMContentLoaded', () => {
  const modes = ['totale', 'parziale', 'romana', 'separa'];
  modes.forEach(mode => {
    const btn = document.querySelector('.row.metodi button.' + mode);
    if (btn) {
      btn.onclick = () => toggleModalita(mode);
    }
  });
});
</script>
<style>

.categorie button {
    padding: 10px 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #39D9A9;
    color: white;
    font-weight: 600;
    font-size: 15px;
    transition: background 0.2s ease, transform 0.1s ease;
}
.categorie button:hover {
    background: #2cbf93;
    transform: scale(1.05);
}

    body { margin: 0; font-family: 'Segoe UI', sans-serif; display: flex; height: 100vh; }
    .sidebar { width: 80px; background: #0061A8; display: flex; flex-direction: column; padding: 10px; color: white; }
    .content { flex: 1; display: flex; flex-direction: column; padding: 20px; background: #F5F9FF; }
    .categorie { display: flex; gap: 10px; margin-bottom: 20px; }
    .categorie button { padding: 10px; border: none; background: #E5F2FF; border-radius: 8px; cursor: pointer; }
    .prodotti { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px; }
    .card { background: white; border-radius: 10px; padding: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .card img { width: 100%; height: 90px; object-fit: cover; border-radius: 6px; }
    .carrello { width: 280px; background: #fff; border-left: 2px solid #ddd; padding: 20px; display: flex; flex-direction: column; }
    .footer { margin-top: auto; }
    .btn-paga { background: #007BFF; color: white; padding: 12px; border: none; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; }
  
.card.selected {
  opacity: 0.6;
  border: 2px solid #007BFF;
}

.card {
  position: relative;
}
.card .quantita-badge {
  position: absolute;
  top: 6px;
  right: 8px;
  background: #007BFF;
  color: white;
  font-size: 13px;
  padding: 2px 6px;
  border-radius: 12px;
  display: none;
}
.card.selected .quantita-badge {
  display: block;
}

.card .remove-one {
  position: absolute;
  bottom: 6px;
  left: 50%;
  transform: translateX(-50%);
  background: #ff4d4f;
  color: white;
  font-size: 14px;
  padding: 2px 6px;
  border-radius: 50%;
  cursor: pointer;
  display: none;
}
.card.selected .remove-one {
  display: block;
}

.card .remove-one {
  opacity: 1 !important;
  font-weight: bold;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.order-item .azioni {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-left: 10px;
}
.order-item button {
  background: #007BFF;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 2px 6px;
  font-size: 14px;
  cursor: pointer;
}
.order-item button.rimuovi {
  background: #ff4d4f;
}

.card {
  display: flex;
  align-items: center;
  padding: 10px;
  gap: 10px;
  background: #e9f1fd;
  border-radius: 16px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.05);
  transition: all 0.2s ease;
  position: relative;
}
.card img {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 10px;
}
.card h4 {
  font-size: 16px;
  margin: 0;
}
.card p {
  font-size: 14px;
  color: #666;
  margin: 2px 0 0;
}

.card {
  min-width: 180px;
  height: 80px;
}
.card h4 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}
.card p {
  font-size: 16px;
  color: #444;
}

.prodotti {
  display: flex;
  flex-wrap: wrap;
  gap: 14px;
  align-items: flex-start;
  justify-content: flex-start;
}

.sezione {
  margin-bottom: 40px;
}
.sezione h2 {
  font-size: 22px;
  margin: 20px 0 10px;
  color: #222;
}
.sezioni-prodotti {
  overflow-y: auto;
  padding-right: 10px;
}

.popup-pagamento {
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.popup-pagamento .popup-content {
  width: 90%;
  max-width: 700px;
  background: white;
  border-radius: 30px;
  padding: 20px;
  font-family: 'Segoe UI';
}
.popup-header {
  text-align: right;
}
.popup-header .chiudi {
  background: transparent;
  font-size: 20px;
  border: none;
  cursor: pointer;
}
.popup-grid .row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
  flex-wrap: wrap;
}
.popup-grid .row button {
  flex: 1;
  margin: 5px;
  padding: 12px;
  border-radius: 12px;
  border: none;
  background: #eaf4ff;
  font-weight: bold;
}
.popup-grid .row button.attivo {
  background: linear-gradient(to right, #00c6ff, #0072ff);
  color: white;
}
.popup-grid .grande {
  height: 60px;
  font-size: 18px;
}
.popup-grid .altro {
  width: 100%;
  background: #eaf4ff;
  font-weight: bold;
  padding: 14px;
  border-radius: 12px;
}
.popup-grid .totale, .pagato, .da-pagare {
  flex: 1;
  text-align: center;
  padding: 10px;
  border-radius: 12px;
}
.popup-grid .totale { background: #eef4ff; }
.popup-grid .pagato { background: #e7fbee; }
.popup-grid .da-pagare { background: #ffe8ec; }

.modalita-section {
  background: #f5faff;
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 12px;
}
#separa-prodotti div {
  background: white;
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
}
#separa-prodotti div.selected {
  background: #007BFF;
  color: white;
}


/* Sidebar gradient */
.sidebar {
    background: linear-gradient(180deg, #39D9A9, #00B4FF, #6A00FF);
}

/* Pulsante Prepara gradient */
.prepara {
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    padding: 12px;
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.2s ease;
}
.prepara:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* Riquadri categorie in alto con gradient */
.categorie button {
    padding: 10px 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    font-weight: 600;
    font-size: 15px;
    transition: background 0.3s ease, transform 0.1s ease;
}
.categorie button:hover {
    transform: scale(1.05);
    background: linear-gradient(135deg, #2cbf93, #009de0, #5800cc);
}


.card {
    border: 1px solid rgba(57, 217, 169, 0.4); /* verde acqua trasparente sottile */
    transition: box-shadow 0.2s ease, transform 0.1s ease;
}
.card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-2px);
}

.sezione h2 {
    font-size: 20px;
    font-weight: 600;
    color: white;
    background: linear-gradient(135deg, #007BFF, #0050D8);
    padding: 10px 16px;
    border-radius: 12px;
    width: fit-content;
    margin: 0 auto 12px auto;
    text-transform: capitalize;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: #0050D8;
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    width: 100%;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: #0050D8;
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
    display: inline-block;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: #0050D8;
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
    width: 50%;
    max-width: 400px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: #39D9A9;
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
    width: 50%;
    max-width: 400px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
    width: 50%;
    max-width: 400px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: linear-gradient(to right, #39D9A9 0%, #00B4FF 50%, #6A00FF 80%, rgba(106,0,255,0) 100%);
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    max-width: 400px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: linear-gradient(to right, #39D9A9 0%, #00B4FF 40%, #6A00FF 70%, rgba(106,0,255,0) 100%);
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    width: 60%;
    max-width: 480px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: linear-gradient(to right, #7FE8CE 0%, #66CCFF 40%, #B388FF 70%, rgba(179,136,255,0) 100%);
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    width: 60%;
    max-width: 480px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.order-item .azioni {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-left: 10px;
}
.order-item button {
    background: #007BFF;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 2px 6px;
    font-size: 14px;
    cursor: pointer;
}
.order-item button.btn-subtract {
    background: #ff4d4f;
}

.sezione h2 {
    font-size: 16px;
    font-weight: 500;
    color: white;
    background: linear-gradient(to right, #A8F0DB 0%, #99D9FF 40%, #C7AFFF 70%, rgba(199,175,255,0) 100%);
    padding: 6px 14px;
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    width: 60%;
    max-width: 480px;
    margin: 0 0 10px 0;
    text-transform: lowercase;
    box-shadow: none;
}

.popup-subtotale {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.4);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease;
}
.popup-content-subtotale {
  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 20px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.1);
  text-align: center;
  animation: scaleIn 0.3s ease;
}
.popup-content-subtotale h3 {
  font-size: 22px;
  margin-bottom: 10px;
  color: #0061A8;
}
.totali-subtotale {
  display: flex;
  justify-content: space-between;
  background: linear-gradient(135deg, #A8F0DB, #99D9FF);
  padding: 10px;
  border-radius: 12px;
  margin-bottom: 10px;
}
.totali-subtotale div {
  flex: 1;
}
.totali-subtotale span {
  display: block;
  font-size: 12px;
  color: #333;
}
.totali-subtotale strong {
  font-size: 18px;
  color: #007BFF;
}
.sconti-rapidi {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
  margin-bottom: 10px;
}
.sconti-rapidi button {
  flex: 1;
  min-width: 60px;
  background: #e0f7fa;
  border: none;
  border-radius: 8px;
  padding: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.2s;
}
.sconti-rapidi button:hover {
  background: #b2ebf2;
}
.tastierino-subtotale {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 12px;
}
.tastierino-subtotale button {
  background: #007BFF;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px;
  font-size: 18px;
  cursor: pointer;
  transition: background 0.2s;
}
.tastierino-subtotale button:hover {
  background: #005BB5;
}
.tastierino-subtotale .reset {
  background: #FF6B6B;
}
.conferma-subtotale {
  background: linear-gradient(135deg, #39D9A9, #00B4FF);
  color: white;
  border: none;
  border-radius: 12px;
  padding: 12px;
  font-size: 18px;
  width: 100%;
  cursor: pointer;
  transition: background 0.3s;
}
.conferma-subtotale:hover {
  background: linear-gradient(135deg, #2CBF93, #009DE0);
}
@keyframes fadeIn {
  from { opacity: 0; } to { opacity: 1; }
}
@keyframes scaleIn {
  from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; }
}
</style>

<style>
.barrato {
    text-decoration: line-through;
    color: #999;
}
</style>

<style>
.sidebar {
    display: flex;
    flex-direction: column;
    height: 100vh;
    max-height: 100vh;
}
.sidebar-header {
    flex: 0 0 auto;
    padding: 14px;
    font-weight: 600;
    font-size: 20px;
}
.order-list {
    flex: 1 1 auto;
    overflow-y: auto;
    padding: 8px 10px 0 10px;
}
.order-item {
    padding: 8px 6px;
    border-bottom: 1px solid #e0e0e0;
}
.order-item:last-child {
    border-bottom: none;
}
.sidebar-totale {
    flex: 0 0 auto;
    position: sticky;
    bottom: 0;
    background: #ffffffee;
    backdrop-filter: blur(8px);
    padding: 12px 10px;
    border-top: 1px solid #ddd;
    box-shadow: 0 -3px 10px rgba(0,0,0,0.07);
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 10;
}
.totale strong {
    font-size: 18px;
}
button, .button {
    font-size: 16px !important;
    padding: 10px !important;
    border-radius: 10px !important;
}
</style>

<style>
#btnHome:hover, #btnTavoli:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 14px rgba(0,0,0,0.2);
}
</style>





<style>
.riepilogo-order {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;
    height: 100%;
}
.ordine-footer {
    position: fixed;
    bottom: 0;
    right: 0;
    width: 300px;
    background: white;
    border-top: 1px solid #ddd;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
    padding: 12px;
    z-index: 9999;
}
</style>


<style>
#paginaTavoli {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px 20px;
}
#paginaTavoli h2 {
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 30px;
}
.tavoli-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 15px;
    width: 100%;
    max-width: 900px;
    justify-items: center;
}
.tavolo {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    padding: 15px;
    width: 100%;
    max-width: 140px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: transform 0.2s;
}
.tavolo:hover {
    transform: scale(1.05);
}
.tavolo h3 {
    font-size: 18px;
    font-weight: 600;
    color: #000;
}
.tavolo p {
    margin: 4px 0;
    color: #333;
    font-size: 14px;
}
.tavolo p:last-child {
    color: #39D9A9;
    font-weight: 600;
}
#paginaTavoli button {
    margin-top: 30px;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
#paginaTavoli button:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
</style>


<style>
#paginaTavoli {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    background: #f5f7fa;
    min-height: 100vh;
}
#paginaTavoli h2 {
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 30px;
}
.tavoli-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 15px;
    width: 100%;
    max-width: 900px;
    justify-items: center;
}
.tavolo {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    padding: 20px;
    width: 100%;
    max-width: 140px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
}
.tavolo:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.12);
}
.tavolo h3 {
    font-size: 18px;
    font-weight: 700;
    color: #333;
}
.tavolo p {
    margin: 6px 0;
    color: #333;
    font-size: 14px;
}
.tavolo p:last-child {
    color: #39D9A9;
    font-weight: 700;
}
#paginaTavoli button {
    margin-top: 40px;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 14px 28px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
#paginaTavoli button:hover {
    transform: scale(1.06);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}
</style>


<style>
#paginaTavoli {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    background: #f0f4f8;
    min-height: 100vh;
}
#paginaTavoli h2 {
    font-size: 28px;
    font-weight: 700;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 30px;
}
.tavoli-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 48px;
    width: 100%;
    max-width: 900px;
    justify-items: center;
}
.tavolo {
    background: linear-gradient(135deg, rgba(57, 217, 169, 0.15), rgba(0, 180, 255, 0.15));
    border-radius: 18px;
    padding: 16px;
    width: 100%;
    max-width: 150px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
}
.tavolo:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}
.tavolo svg {
    width: 32px;
    height: 32px;
    fill: #39D9A9;
    margin-bottom: 6px;
}
.tavolo h3 {
    font-size: 16px;
    font-weight: 700;
    color: #333;
    margin: 6px 0;
}
.tavolo p {
    margin: 4px 0;
    color: #333;
    font-size: 14px;
}
.tavolo p:last-child {
    color: #39D9A9;
    font-weight: 700;
}
#paginaTavoli button {
    margin-top: 40px;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    border: none;
    border-radius: 12px;
    padding: 14px 28px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
#paginaTavoli button:hover {
    transform: scale(1.06);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}
</style>


<style>
html, body {
    height: 100%;
    overflow: hidden;
}

.content {
    overflow-y: auto;
    height: 100vh;
}
</style>


<style>
.btn-sezione-tavoli {
    padding: 10px 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    font-weight: 600;
    font-size: 15px;
    transition: background 0.3s ease, transform 0.1s ease;
}
.btn-sezione-tavoli:hover {
    transform: scale(1.05);
    background: linear-gradient(135deg, #2cbf93, #009de0, #5800cc);
}
</style>


<style>
.active-tavoli {
    box-shadow: 0 0 0 3px rgba(57, 217, 169, 0.5);
}
</style>


<style>
#popupTavolo {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}
#popupTavoloContent {
    background: white;
    border-radius: 16px;
    padding: 24px;
    width: 320px;
    text-align: center;
    font-family: sans-serif;
}
#popupTavoloContent h3 {
    margin-bottom: 12px;
    font-size: 20px;
}
#popupTavoloContent p {
    margin-bottom: 20px;
    font-size: 16px;
    color: #333;
}
#popupTavoloContent button {
    background: #39D9A9;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 16px;
    cursor: pointer;
}
#popupTavoloContent button:hover {
    background: #2cbf93;
}
</style>


<style>
#btnAggiungiAlTavolo {
    position: fixed;
    bottom: 90px;
    right: 20px;
    background: #39D9A9;
    color: white;
    border: none;
    padding: 14px 20px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 16px;
    display: none;
    cursor: pointer;
    z-index: 1000;
}
#btnAggiungiAlTavolo:hover {
    background: #2cbf93;
}
</style>

</head>
<body>
<div class="sidebar">
<div style="font-size: 20px; font-weight: bold; margin: 20px 0; text-align: center;">Zappy</div>

<button id="btnHome" style="
    margin: 40px 0;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    border: none;
    border-radius: 20px;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    transition: transform 0.2s ease;
">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="28" height="28"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
</button>

<button id="btnTavoli" style="
    margin: 40px 0;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    border: none;
    border-radius: 20px;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    transition: transform 0.2s ease;
">
    
<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 512 512" width="28" height="28">
<path d="M256 32c-70.7 0-128 57.3-128 128 0 32 24 96 128 224 104-128 128-192 128-224 0-70.7-57.3-128-128-128zM80 320c-26.5 0-48 21.5-48 48v80h48v-80h48v80h48v-80c0-26.5-21.5-48-48-48H80zm352 0c-26.5 0-48 21.5-48 48v80h48v-80h48v80h48v-80c0-26.5-21.5-48-48-48h-48z"/>
</svg>

</button>



</div>
<div class="content">
  <div class="categorie"></div>
  <div class="prodotti"></div>
  <div class="sezioni-prodotti"></div>
  
</div>
<div class="riepilogo-order">
<div class="ordine-header">
<div style="font-weight: bold; font-size: 18px;">Nuovo ordine</div>
<div style="font-size: 16px;">Vendita diretta</div>
</div>
<div class="order-list"><p style="color:#555;">Nessun prodotto</p></div>
<div class="ordine-footer">
<div class="totale">Totale: <strong>€ 0,00</strong></div>
<div class="bottoni">
<button class="subtotale">Subtotale</button>
<button class="pagamento">Pagamento</button>
</div>
<button class="prepara">Prepara</button>
</div>
</div>
<style>
    .riepilogo-order {
      width: 300px;
      background: white;
      border-left: 2px solid #eee;
      padding: 16px;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .ordine-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .order-list {
      flex: 1;
    }
    .order-item {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    .order-item img {
      width: 40px;
      height: 40px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 10px;
    }
    .order-item .nome {
      font-weight: bold;
    }
    .order-item .qty {
      color: #007BFF;
    }
    .prezzo {
      margin-left: auto;
    }
    
    .bottoni {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }
    .subtotale, .pagamento, .prepara {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    .subtotale, .pagamento {
      background: #E5F2FF;
    }
    .prepara {
      background: #0050D8;
      color: white;
    }
  

/* Sidebar gradient */
.sidebar {
    background: linear-gradient(180deg, #39D9A9, #00B4FF, #6A00FF);
}

/* Pulsante Prepara gradient */
.prepara {
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    padding: 12px;
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.2s ease;
}
.prepara:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* Riquadri categorie in alto con gradient */
.categorie button {
    padding: 10px 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: linear-gradient(135deg, #39D9A9, #00B4FF, #6A00FF);
    color: white;
    font-weight: 600;
    font-size: 15px;
    transition: background 0.3s ease, transform 0.1s ease;
}
.categorie button:hover {
    transform: scale(1.05);
    background: linear-gradient(135deg, #2cbf93, #009de0, #5800cc);
}


.card {
    border: 1px solid rgba(57, 217, 169, 0.4); /* verde acqua trasparente sottile */
    transition: box-shadow 0.2s ease, transform 0.1s ease;
}
.card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-2px);
}
</style>
<script>
let carrello = [];

function aggiornaOrdine() {
  const lista = document.querySelector('.order-list');
  const totaleDOM = document.querySelector('.totale strong');
  lista.innerHTML = '';
  let totale = 0;

  carrello.forEach((p, i) => {
    const div = document.createElement('div');
    div.className = 'order-item';
    div.innerHTML = `
      <img src="${p.immagine}" />
      <div>
        <div class="nome">${p.nome}</div>
        <div class="qty">x${p.quantita}</div>
      </div>
      <div class="prezzo">€ ${(p.prezzo * p.quantita).toFixed(2)}</div>
    `;
    div.onclick = () => {
      if (p.quantita > 1) {
        p.quantita--;
      } else {
        carrello.splice(i, 1);
      }
      aggiornaOrdine();
      aggiornaCardUI();
    };
    lista.appendChild(div);
    totale += p.prezzo * p.quantita;
  });

  totaleDOM.textContent = `€ ${totale.toFixed(2)}`;
}

function aggiornaCardUI() {
  document.querySelectorAll('.card').forEach(card => {
    const nome = card.querySelector('h4').textContent;
    const index = carrello.findIndex(p => p.nome === nome);
    if (index > -1) {
      card.classList.add('selected');
    } else {
      card.classList.remove('selected');
    }
  });
}


function aggiornaCardUI() {
    document.querySelectorAll('.card').forEach(card => {
        const nome = card.querySelector('h4').textContent;
        const index = carrello.findIndex(p => p.nome === nome);
        let badge = card.querySelector('.quantita-badge');
        let removeBtn = card.querySelector('.remove-one');

        if (!badge) {
            badge = document.createElement('div');
            badge.className = 'quantita-badge';
            card.appendChild(badge);
        }
        if (!removeBtn) {
            removeBtn = document.createElement('div');
            removeBtn.className = 'remove-one';
            removeBtn.textContent = '✕';
            card.appendChild(removeBtn);
        }

        if (index > -1) {
            card.classList.add('selected');
            badge.textContent = 'x' + carrello[index].quantita;
            badge.style.display = 'block';
            removeBtn.style.display = 'block';
        } else {
            card.classList.remove('selected');
            badge.style.display = 'none';
            removeBtn.style.display = 'none';
        }
    });
}

document.addEventListener("click", function(e) {
    const card = e.target.closest(".card");
    if (card) {
        const nome = card.querySelector("h4").textContent;
        const prezzo = parseFloat(card.querySelector("p").textContent.replace("€", "").replace(",", "."));
        const immagine = card.querySelector("img").src;

        // Se clic sulla X rossa (rimuove uno alla volta)
        if (e.target.classList.contains("remove-one")) {
            e.stopPropagation();
            const index = carrello.findIndex(p => p.nome === nome);
            if (index > -1) {
                if (carrello[index].quantita > 1) {
                    carrello[index].quantita--;
                } else {
                    carrello.splice(index, 1);
                }
                aggiornaOrdine();
                aggiornaCardUI();
            }
            return;
        }

        // Se clic sulla card ➔ aumenta quantità
        const index = carrello.findIndex(p => p.nome === nome);
        if (index > -1) {
            carrello[index].quantita++;
        } else {
            carrello.push({ nome, prezzo, immagine, quantita: 1 });
        }
        aggiornaOrdine();
        aggiornaCardUI();
        return;
    }

    // Gestione pulsanti + e - nel carrello
    if (e.target.classList.contains('btn-add')) {
        const idx = parseInt(e.target.dataset.index);
        carrello[idx].quantita++;
        aggiornaOrdine();
        aggiornaCardUI();
    }
    if (e.target.classList.contains('btn-subtract')) {
        const idx = parseInt(e.target.dataset.index);
        if (carrello[idx].quantita > 1) {
            carrello[idx].quantita--;
        } else {
            carrello.splice(idx, 1);
        }
        aggiornaOrdine();
        aggiornaCardUI();
    }
});

function aggiornaOrdine() {
    const lista = document.querySelector('.order-list');
    const totaleDOM = document.querySelector('.totale strong');
    lista.innerHTML = '';
    let totale = 0;

    carrello.forEach((p, i) => {
        const div = document.createElement('div');
        div.className = 'order-item';
        div.innerHTML = `
            <img src="${p.immagine}" />
            <div>
                <div class="nome">${p.nome}</div>
                <div class="qty">x${p.quantita}</div>
            </div>
            <div class="prezzo">€ ${(p.prezzo * p.quantita).toFixed(2)}</div>
            <div class="azioni">
                <button class="btn-add" data-index="${i}">+</button>
                <button class="btn-subtract" data-index="${i}">-</button>
            </div>
        `;
        lista.appendChild(div);
        totale += p.prezzo * p.quantita;
    });

    totaleDOM.textContent = `€ ${totale.toFixed(2)}`;
}

</script><script>
</script>
<div class="popup-pagamento" id="popup-pagamento">
<div class="popup-content">
<div class="popup-header">
<button class="chiudi" onclick="togglePopupPagamento()">✕</button>
</div>
<div class="popup-grid">
<div class="row top-buttons">
<button class="attivo">👤 Persona</button>
<button>🏢 Azienda</button>
</div>
<div class="row totali">
<div class="totale">Totale (€)<br/><strong id="totale-popup">0,00</strong></div>
<div class="pagato">Pagato (€)<br/><strong>0,00</strong></div>
<div class="da-pagare">Da pagare (€)<br/><strong id="da-pagare-popup">0,00</strong></div>
</div>
<div class="row metodi">
<button class="attivo totale">Totale</button>
<button class="parziale">Parziale</button>
<button class="allaromana">Alla Romana</button>
<button class="separa">Separa</button>
</div>
<div class="row finali">
<button class="grande">Contanti</button>
<button class="grande">Carte</button>
</div>
<div class="row">
<button class="altro">Altro</button>
</div>

<div class="modalita-section" id="modalita-parziale" style="display:none;">
<p style="text-align:center;">Importo parziale (€)</p>
<div style="display:flex; justify-content:center; align-items:center; gap:10px;">
<button onclick="modificaParziale(-1)">−</button>
<input id="input-parziale" min="0" style="width:60px; text-align:center;" type="number" value="0"/>
<button onclick="modificaParziale(1)">+</button>
</div>
</div>
<div class="modalita-section" id="modalita-romana" style="display:none;">
<p style="text-align:center;">Numero di persone</p>
<div style="display:flex; justify-content:center; align-items:center; gap:10px;">
<button onclick="modificaPersone(-1)">−</button>
<input id="input-persone" min="1" style="width:60px; text-align:center;" type="number" value="2"/>
<button onclick="modificaPersone(1)">+</button>
</div>
<p style="text-align:center;">Importo (€)</p>
<div style="text-align:center;">
<strong id="romana-importo">0,00</strong>
</div>
</div>
<div class="modalita-section" id="modalita-separa" style="display:none;">
<p>Prodotti ordinati</p>
<div id="separa-prodotti" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
<p>Prodotti selezionati</p>
<div id="selezionati-prodotti" style="min-height: 30px; margin-bottom: 10px;"></div>
<p style="text-align:right;">Importo (€): <strong id="separa-totale">0,00</strong></p>
</div>
</div>
</div>
</div>
<script>
function togglePopupPagamento() {
  const popup = document.getElementById('popup-pagamento');
  popup.style.display = popup.style.display === 'flex' ? 'none' : 'flex';

  const totale = carrello.reduce((sum, p) => sum + p.prezzo * p.quantita, 0);
  document.getElementById('totale-popup').innerText = totale.toFixed(2).replace('.', ',');
  document.getElementById('da-pagare-popup').innerText = totale.toFixed(2).replace('.', ',');
}

document.addEventListener("DOMContentLoaded", () => {
  const btnPagamento = document.querySelector(".pagamento");
  if (btnPagamento) {
    btnPagamento.addEventListener("click", togglePopupPagamento);
  }
});
</script>
<div id="popup-subtotale" class="popup-subtotale">
  <div class="popup-content-subtotale">
    <h3>Subtotale ( € )</h3>
    <div class="totali-subtotale">
      <div><span>Subtotale</span><strong id="subtotale-valore">0,00</strong></div>
      <div><span>Differenza</span><strong id="differenza-valore">0,00</strong></div>
      <div><span>Totale</span><strong id="totale-valore">0,00</strong></div>
    </div>
    <div class="sconti-rapidi">
      <button onclick="applicaSconto(-20)">-20%</button>
      <button onclick="applicaSconto(-10)">-10%</button>
      <button onclick="applicaSconto(-5)">-5%</button>
      <button onclick="applicaSconto(5)">+5%</button>
      <button onclick="applicaSconto(10)">+10%</button>
      <button onclick="applicaSconto(20)">+20%</button>
    </div>
    <div class="tastierino-subtotale">
      <button onclick="inserisciNumero(1)">1</button>
      <button onclick="inserisciNumero(2)">2</button>
      <button onclick="inserisciNumero(3)">3</button>
      <button onclick="inserisciNumero(4)">4</button>
      <button onclick="inserisciNumero(5)">5</button>
      <button onclick="inserisciNumero(6)">6</button>
      <button onclick="inserisciNumero(7)">7</button>
      <button onclick="inserisciNumero(8)">8</button>
      <button onclick="inserisciNumero(9)">9</button>
      <button onclick="inserisciNumero(0)">0</button>
      <button onclick="inserisciNumero(00)">00</button>
      <button class="reset" onclick="resetInput()">C</button>
    </div>
    <button class="conferma-subtotale" onclick="confermaSubtotale()">Conferma</button>
  </div>
</div>


<script>
function togglePopupSubtotale(show = true) {
    const popup = document.getElementById('popup-subtotale');
    popup.style.display = show ? 'flex' : 'none';
    const subtotaleText = document.querySelector('.totale strong').innerText.replace(/[^\d,\.]/g, '').replace(',', '.');
    const subtotale = parseFloat(subtotaleText) || 0;
    document.getElementById('subtotale-valore').innerText = subtotale.toFixed(2).replace('.', ',');
    document.getElementById('totale-valore').innerText = subtotale.toFixed(2).replace('.', ',');
    document.getElementById('differenza-valore').innerText = '0,00';
}

function applicaSconto(percent) {
    const subtotale = parseFloat(document.getElementById('subtotale-valore').innerText.replace(',', '.')) || 0;
    const differenza = subtotale * (percent / 100);
    const totale = subtotale + differenza;
    document.getElementById('differenza-valore').innerText = differenza.toFixed(2).replace('.', ',');
    document.getElementById('totale-valore').innerText = totale.toFixed(2).replace('.', ',');
}

function inserisciNumero(numero) {
    const differenzaElem = document.getElementById('differenza-valore');
    let current = differenzaElem.innerText.replace(/[^\d]/g, '');
    current = current + numero.toString();
    const valore = parseFloat(current) / 100;
    differenzaElem.innerText = valore.toFixed(2).replace('.', ',');
    const subtotale = parseFloat(document.getElementById('subtotale-valore').innerText.replace(',', '.')) || 0;
    const totale = subtotale + valore;
    document.getElementById('totale-valore').innerText = totale.toFixed(2).replace('.', ',');
}

function resetInput() {
    document.getElementById('differenza-valore').innerText = '0,00';
    document.getElementById('totale-valore').innerText = document.getElementById('subtotale-valore').innerText;
}

function confermaSubtotale() {
    const nuovoTotale = document.getElementById('totale-valore').innerText;
    const totaleElem = document.querySelector('.totale strong');

    // Se non è già barrato, lo barra
    if (!totaleElem.classList.contains('barrato')) {
        totaleElem.classList.add('barrato');
        const nuovoTotaleElem = document.createElement('span');
        nuovoTotaleElem.className = 'nuovo-totale';
        nuovoTotaleElem.style.marginLeft = '8px';
        nuovoTotaleElem.style.color = '#39D9A9';
        nuovoTotaleElem.style.fontWeight = '600';
        nuovoTotaleElem.innerText = '€ ' + nuovoTotale;
        totaleElem.parentElement.appendChild(nuovoTotaleElem);
    } else {
        // Se già barrato, aggiorna il nuovo totale
        const nuovoTotaleElem = document.querySelector('.nuovo-totale');
        if (nuovoTotaleElem) {
            nuovoTotaleElem.innerText = '€ ' + nuovoTotale;
        }
    }

    togglePopupSubtotale(false);
}

document.addEventListener("DOMContentLoaded", () => {
    const btnSubtotale = document.querySelector(".subtotale");
    if (btnSubtotale) {
        btnSubtotale.addEventListener("click", () => {
            togglePopupSubtotale(true);
        });
    }
});
</script>


<script>
// Rimuove barratura e nuovo totale quando cambia il carrello
function resetTotaleManuale() {
    const totaleElem = document.querySelector('.totale strong');
    const nuovoTotaleElem = document.querySelector('.nuovo-totale');
    if (totaleElem && totaleElem.classList.contains('barrato')) {
        totaleElem.classList.remove('barrato');
    }
    if (nuovoTotaleElem) {
        nuovoTotaleElem.remove();
    }
}

// Hook sulle funzioni di aggiornamento carrello
const aggiornaOrdineOriginal = aggiornaOrdine;
aggiornaOrdine = function() {
    resetTotaleManuale(); // resetta se il carrello cambia
    aggiornaOrdineOriginal(); // esegue la funzione originale
};
</script>


<div id="paginaTavoli" style="display:none; flex:1; flex-direction:column; padding:20px; overflow-y:auto;">
  <h2 style="color:#007BFF; text-align:center;">Gestione Tavoli</h2>
  
<div id="conteggioTavoli" style="text-align:center; font-weight:600; margin-bottom:10px;">Tavoli visibili: 0/0</div>
<div class="sezioni-tavoli" style="display: flex; gap: 10px; margin-bottom: 20px; justify-content: center;">
    <button class="btn-sezione-tavoli">TUTTI</button>
    <button class="btn-sezione-tavoli">SALA 1</button>
    <button class="btn-sezione-tavoli">SALA 2</button>
    <button class="btn-sezione-tavoli">ESTERNO</button>
</div>

<div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(140px, 1fr)); gap: 48px; justify-items:center;">
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 1</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 2</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 3</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 4</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 5</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 6</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 7</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 8</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 9</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 10</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 11</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 12</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 13</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 14</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 15</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 16</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 17</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 18</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 19</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    
    <div class="tavolo" style="background:linear-gradient(135deg, #CFFCF3, #D9F0FF, #E9D9FF); border: 2px solid #7FE8CE; border-radius:16px; padding:15px; width:100%; max-width:140px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform 0.2s;">
      <h3>Tavolo 20</h3><p>€ 0,00</p><p style="color:#00b894; font-weight:bold;">Libero</p>
    </div>
    </div>
  <button onclick="mostraPagina('content')" style="margin-top:20px; background:#ff4d4f; color:white; border:none; border-radius:8px; padding:10px 20px; font-size:16px; cursor:pointer;">Torna alla Vendita</button>
</div>


<script>
document.getElementById('btnTavoli').addEventListener('click', function() {
    mostraPagina('paginaTavoli');
});

function mostraPagina(id) {
    document.querySelector('.content').style.display = 'none';
    document.querySelector('.riepilogo-order').style.display = 'none';
    document.getElementById('paginaTavoli').style.display = 'none';

    if (id === 'content') {
        document.querySelector('.content').style.display = 'block';
        document.querySelector('.riepilogo-order').style.display = 'block';
    } else {
        document.getElementById(id).style.display = 'block';
    }
}
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const btnHome = document.getElementById('btnHome');
    if (btnHome) {
        btnHome.addEventListener('click', function() {
            document.querySelector('.content').style.display = 'block';
            const riepilogo = document.querySelector('.riepilogo-order');
            if (riepilogo) riepilogo.style.display = 'block';
            const tavoli = document.getElementById('paginaTavoli');
            if (tavoli) tavoli.style.display = 'none';
        });
    }
});
</script>

<script>
document.querySelectorAll('.btn-sezione-tavoli').forEach(button => {
    button.addEventListener('click', () => {
        const selected = button.textContent.trim();
        document.querySelectorAll('.tavolo').forEach((tavolo, index) => {
            const n = index + 1;
            tavolo.style.display = (
                selected === 'TUTTI' ||
                (selected === 'SALA 1' && n >= 1 && n <= 5) ||
                (selected === 'SALA 2' && n >= 6 && n <= 14) ||
                (selected === 'ESTERNO' && n >= 15 && n <= 20)
            ) ? 'block' : 'none';
        });
    });
});
</script>


<script>
function aggiornaConteggio() {
    const visibili = document.querySelectorAll('.tavolo[style*="block"]').length;
    const totale = document.querySelectorAll('.tavolo').length;
    document.getElementById('conteggioTavoli').textContent = `Tavoli visibili: ${visibili}/${totale}`;
}

document.querySelectorAll('.btn-sezione-tavoli').forEach(button => {
    button.addEventListener('click', () => {
        document.querySelectorAll('.btn-sezione-tavoli').forEach(btn => btn.classList.remove('active-tavoli'));
        button.classList.add('active-tavoli');
        const selected = button.textContent.trim();
        document.querySelectorAll('.tavolo').forEach((tavolo, index) => {
            const n = index + 1;
            tavolo.style.display = (
                selected === 'TUTTI' ||
                (selected === 'SALA 1' && n >= 1 && n <= 5) ||
                (selected === 'SALA 2' && n >= 6 && n <= 14) ||
                (selected === 'ESTERNO' && n >= 15 && n <= 20)
            ) ? 'block' : 'none';
        });
        aggiornaConteggio();
    });
});

// Click sul tavolo ➔ apri ordine simulato
document.querySelectorAll('.tavolo').forEach(tavolo => {
    tavolo.addEventListener('click', () => {
        const tavoloNome = tavolo.querySelector('h3').textContent.trim();
        
    });
});

// Aggiorna conteggio iniziale
aggiornaConteggio();
</script>


<div id="popupTavolo">
    <div id="popupTavoloContent">
        <h3 id="popupTavoloTitolo">Tavolo</h3>
        <p>Nessun ordine ancora associato.</p>
        <button onclick="vaiAllaVendita()">AGGIUNGI PRODOTTI</button><br><br>
        <button onclick="chiudiPopupTavolo()" style="background:#ccc; color:#000;">Chiudi</button>
    </div>
</div>


<script>
let tavoloSelezionato = null;

document.querySelectorAll('.tavolo').forEach(tavolo => {
    tavolo.addEventListener('click', () => {
        tavoloSelezionato = tavolo.querySelector('h3').textContent.trim();
        document.getElementById('popupTavoloTitolo').textContent = tavoloSelezionato;
        document.getElementById('popupTavolo').style.display = 'flex';
    });
});

function chiudiPopupTavolo() {
    document.getElementById('popupTavolo').style.display = 'none';
}

// Porta alla pagina principale con tutti i prodotti
function vaiAllaVendita() {
    chiudiPopupTavolo();
    mostraPagina('content');
}
</script>


<button id="btnAggiungiAlTavolo" onclick="aggiungiAlTavolo()">AGGIUNGI AL TAVOLO</button>


<script>
let tavoloSelezionato = null;
let ordiniTavoli = {};
let carrello = []; // qui collegherai i prodotti reali

document.querySelectorAll('.tavolo').forEach(tavolo => {
    tavolo.addEventListener('click', () => {
        tavoloSelezionato = tavolo.querySelector('h3').textContent.trim();
        mostraOrdiniTavolo();
        document.getElementById('popupTavolo').style.display = 'flex';
    });
});

function mostraOrdiniTavolo() {
    const lista = document.getElementById('popupTavoloLista');
    const titolo = document.getElementById('popupTavoloTitolo');
    titolo.textContent = tavoloSelezionato;
    const ordini = ordiniTavoli[tavoloSelezionato] || [];
    lista.innerHTML = ordini.length ? ordini.map(p => `<li>${p}</li>`).join('') : "<li>Nessun ordine ancora associato.</li>";
}

function chiudiPopupTavolo() {
    document.getElementById('popupTavolo').style.display = 'none';
}

function vaiAllaVendita() {
    chiudiPopupTavolo();
    mostraPagina('content');
    controllaPulsanteAggiungi();
}

// Simulazione aggiunta prodotto
function aggiungiProdottoAlCarrello(nomeProdotto) {
    carrello.push(nomeProdotto);
    aggiornaTotaleCarrello();
    controllaPulsanteAggiungi();
}

// Simula visualizzazione del totale carrello
function aggiornaTotaleCarrello() {
    const totale = document.getElementById('totaleCarrello');
    if (totale) {
        totale.textContent = "Totale: € " + (carrello.length * 5).toFixed(2);
    }
}

// Mostra pulsante se tavolo selezionato + carrello pieno
function controllaPulsanteAggiungi() {
    const btn = document.getElementById('btnAggiungiAlTavolo');
    if (tavoloSelezionato && carrello.length > 0) {
        btn.style.display = 'block';
    } else {
        btn.style.display = 'none';
    }
}

// Aggiunge i prodotti al tavolo e svuota il carrello
function aggiungiAlTavolo() {
    if (!tavoloSelezionato) {
        alert("Seleziona un tavolo prima.");
        return;
    }
    if (carrello.length === 0) {
        alert("Il carrello è vuoto.");
        return;
    }
    if (!ordiniTavoli[tavoloSelezionato]) {
        ordiniTavoli[tavoloSelezionato] = [];
    }
    ordiniTavoli[tavoloSelezionato] = ordiniTavoli[tavoloSelezionato].concat(carrello);
    carrello = [];
    aggiornaTotaleCarrello();
    alert(`Prodotti aggiunti a ${tavoloSelezionato}`);
    document.getElementById('btnAggiungiAlTavolo').style.display = 'none';
}
</script>

</body>
</html>
